/*Chibi v0.4, (C)2012 Kyle Barrow, GPLv3 Licensed*/(function(){"use strict";function o(){n=!0;for(var t=0;t<e.length;t++)e[t]();e=[]}function u(){r=!0;n||o();for(var e=0;e<t.length;e++)t[e]();t=[]}function a(e,t){var n=t.length;while(n--)e(t[n])}function f(e,t){return e.currentStyle?e.currentStyle[t]:s.getComputedStyle?s.getComputedStyle(e,null).getPropertyValue(t):null}function l(e,t){return encodeURIComponent(e).replace(/%20/g,"+")+"="+encodeURIComponent(t).replace(/%20/g,"+")}function c(e){var t=[],n=[];if(e)if(e.nodeType&&e.nodeType===1)t=[e];else if(typeof e=="object"||typeof e.length=="number"&&typeof e.item=="function")t=e;else if(typeof e=="string"){i.querySelectorAll||(i.querySelectorAll=function(e){var t,n,r,s=[];t=i.createElement("STYLE");t.type="text/css";if(t.styleSheet){t.styleSheet.cssText=e+" {a:b}";if(i.getElementsByTagName("head").length===0){n=i.createElement("head");i.getElementsByTagName("html")[0].appendChild(n)}i.getElementsByTagName("head")[0].appendChild(t);r=i.getElementsByTagName("*");for(var o=0;o<r.length;o++)f(r[o],"a")==="b"?s.push(r[o]):0;i.getElementsByTagName("head")[0].removeChild(t)}return s});t=i.querySelectorAll(e)}for(var r=0;r<t.length;r++)n[r]=t[r];return n}function h(e,t,n){try{e.style[t]=n}catch(r){}}function p(e){e=e.reverse();e.length===1?e=e[0]:0;return e}function d(e){var t="",n;if(e.constructor===Object){for(n in e)if(e.hasOwnProperty(n))if(e[n].constructor===Array)for(var r=0;r<e[n].length;r++)t+="&"+l(n,e[n][r]);else t+="&"+l(n,e[n])}else a(function(e){if(e.nodeName==="FORM")for(var r=0;r<e.elements.length;r++){n=e.elements[r];if(!n.disabled)switch(n.type){case"button":case"image":case"file":case"submit":case"reset":break;case"select-one":n.length>0?t+="&"+l(n.name,n.value):0;break;case"select-multiple":for(var i=0;i<n.length;i++)n[i].selected?t+="&"+l(n.name,n[i].value):0;break;case"checkbox":case"radio":n.checked?t+="&"+l(n.name,n.value):0;break;default:t+="&"+l(n.name,n.value)}}},e);t.length>0?t=t.substring(1):0;return t}function v(o){var u=c(o);return{ready:function(t){t&&(n?t():e.push(t))},loaded:function(e){e&&(r?e():t.push(e))},find:function(e){if(e){var t=[];switch(e){case"first":u.length>0?u=[u.shift()]:0;break;case"last":u.length>0?u=[u.pop()]:0;break;case"odd":for(var n=0;n<u.length;n+=2)t.push(u[n]);u=t;break;case"even":for(var n=1;n<u.length;n+=2)t.push(u[n]);u=t}}return u.length>0?u.length===1?u[0]:u:!1},hide:function(){a(function(e){e.style.display="none"},u)},show:function(){a(function(e){e.style.display="";f(e,"display")==="none"?e.style.display="block":0},u)},toggle:function(){a(function(e){if(f(e,"display")==="none"){e.style.display="";f(e,"display")==="none"?e.style.display="block":0}else e.style.display="none"},u)},remove:function(){var e=u.length;a(function(e){try{e.parentNode.removeChild(e)}catch(t){}},u);u=[]},css:function(e,t){var n=[];a(function(r){t?h(r,e,t):r.style[e]?n.push(r.style[e]):f(r,e)?n.push(f(r,e)):n.push(null)},u);if(n.length>0){n=n.reverse();n.length===1?n=n[0]:0;return n}},cls:function(e,t){var n=[],r,i;if(e){r=e.split(" ");t=t||"replace"}a(function(s){if(e)switch(t){case"add":s.className=s.className+" "+e;break;case"remove":for(var o=0;o<r.length;o++){i=new RegExp(r[o],"g");s.className=s.className.replace(i,"")}break;case"replace":s.className=e}else n.push(s.className)},u);if(n.length>0)return p(n)},html:function(e,t){var n=[],r,s;a(function(o){if(t){r=i.createElement("div");r.innerHTML=e;while(s=r.lastChild)try{t==="before"?o.parentNode.insertBefore(s,o):t==="after"&&o.parentNode.insertBefore(s,o.nextSibling)}catch(u){break}}else e?o.innerHTML=e:n.push(o.innerHTML)},u);if(n.length>0)return p(n)},attr:function(e,t){var n=[];a(function(r){if(e){e=e.toLowerCase();switch(e){case"style":t?r.style.cssText=t:r.style.cssText?n.push(r.style.cssText):n.push(null);break;case"class":t?r.className=t:r.className?n.push(r.className):n.push(null);break;default:t?r.setAttribute(e,t):r.getAttribute(e)?n.push(r.getAttribute(e)):n.push(null)}}},u);if(n.length>0)return p(n)},val:function(e){var t=[],n=[];typeof e!="undefined"&&typeof e!="object"&&(e=[e]);a(function(r){if(e)switch(r.nodeName){case"SELECT":for(var i=0;i<r.length;i++)for(var s=0;s<e.length;s++){r[i].selected="";if(r[i].value===e[s]){r[i].selected="selected";break}}break;case"INPUT":switch(r.type){case"checkbox":case"radio":r.checked="";for(var i=0;i<e.length;i++)if(r.value===e[i]){r.checked="checked";break}break;default:r.value=e[0]}break;case"TEXTAREA":case"BUTTON":r.value=e[0]}else switch(r.nodeName){case"SELECT":var o=n.length;n.push([]);for(var i=0;i<r.length;i++)r[i].selected?n[o].push(r[i].value):0;switch(n[o].length){case 0:n[o]=null;break;case 1:n[o]=n[o][0]}break;case"INPUT":switch(r.type){case"checkbox":r.checked?n.push(r.value):n.push(null);break;case"radio":var u=!1;for(var i=0;i<t.length;i++)if(t[i][0]===r.name){r.checked?n[t[i][1]]=r.value:0;u=!0}if(!u){t.push([r.name,n.length]);r.checked?n.push(r.value):n.push(null)}break;default:n.push(r.value)}break;case"TEXTAREA":case"BUTTON":n.push(r.value)}},u);if(n.length>0)return p(n)},on:function(e,t,n){o===s||o===i?u=[o]:0;a(function(r){i.addEventListener?n?r.removeEventListener(e,t,!1):r.addEventListener(e,t,!1):i.attachEvent&&(n?r.detachEvent("on"+e,t):r.attachEvent("on"+e,t))},u)},ajax:function(e,t,n,r){var i,t=t||"GET",o=d(u),a="_ts="+ +(new Date);s.XMLHttpRequest?i=new XMLHttpRequest:s.ActiveXObject&&(i=new ActiveXObject("Microsoft.XMLHTTP"));if(i){t=t.toUpperCase();e=r?t==="POST"?e+"?"+a:e+"?"+o+"&"+a:t==="POST"?e:e+"?"+o;i.open(t,e,!0);t==="POST"?i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):0;i.send(o);i.onreadystatechange=function(){if(i.readyState===4&&i.status===200&&n)try{n(i.responseText)}catch(e){}}}}}}var e=[],t=[],n=!1,r=!1,i=document,s=window;if(i.addEventListener){i.addEventListener("DOMContentLoaded",o,!1);s.addEventListener("load",u,!1)}else if(i.attachEvent){i.attachEvent("onreadystatechange",o);s.attachEvent("onload",u)}else s.onload=u;s.$=v})();