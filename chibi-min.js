/* Chibi v0.2, (C) 2012 Kyle Barrow, GPLv3 Licensed */(function(){"use strict";function u(){r=!0;for(var e=0;e<t.length;e++)t[e]();t=[]}function a(){i=!0;r||u();for(var e=0;e<n.length;e++)n[e]();n=[]}function f(t){var n=e.length;while(n--)t(e[n])}function l(e,t){return e.currentStyle?e.currentStyle[t]:o.getComputedStyle?o.getComputedStyle(e,null).getPropertyValue(t):null}function c(e,t){return encodeURIComponent(e).replace(/%20/g,"+")+"="+encodeURIComponent(t).replace(/%20/g,"+")}function h(t){var n=[];if(t)if(t.nodeType&&t.nodeType===1)n=[t];else if(typeof t=="object"||typeof t.length=="number"&&typeof t.item=="function")n=t;else if(typeof t=="string"){s.querySelectorAll||(s.querySelectorAll=function(e){var t,n,r,i=[];t=s.createElement("STYLE");t.type="text/css";if(t.styleSheet){t.styleSheet.cssText=e+" {a:b}";if(s.getElementsByTagName("head").length===0){n=s.createElement("head");s.getElementsByTagName("html")[0].appendChild(n)}s.getElementsByTagName("head")[0].appendChild(t);r=s.getElementsByTagName("*");for(var o=0;o<r.length;o++)l(r[o],"a")==="b"?i.push(r[o]):0;s.getElementsByTagName("head")[0].removeChild(t)}return i});n=s.querySelectorAll(t)}e=[];for(var r=0;r<n.length;r++)e[r]=n[r]}function p(e,t,n){try{e.style[t]=n}catch(r){}}function d(e){e=e.reverse();e.length===1?e=e[0]:0;return e}function v(e){var t="",n;if(e.constructor===Object){for(n in e)if(e.hasOwnProperty(n))if(e[n].constructor===Array)for(var r=0;r<e[n].length;r++)t+="&"+c(n,e[n][r]);else t+="&"+c(n,e[n])}else f(function(e){if(e.nodeName==="FORM")for(var r=0;r<e.elements.length;r++){n=e.elements[r];if(!n.disabled)switch(n.type){case"button":case"image":case"file":case"submit":case"reset":break;case"select-one":n.length>0?t+="&"+c(n.name,n.value):0;break;case"select-multiple":for(var i=0;i<n.length;i++)n[i].selected?t+="&"+c(n.name,n[i].value):0;break;case"checkbox":case"radio":n.checked?t+="&"+c(n.name,n.value):0;break;default:t+="&"+c(n.name,n.value)}}});t.length>0?t=t.substring(1):0;return t}function m(s){h(s);return{ready:function(e){e&&(r?e():t.push(e))},loaded:function(e){e&&(i?e():n.push(e))},find:function(t){if(t){var n=[];switch(t){case"first":e.length>0?e=[e.shift()]:0;break;case"last":e.length>0?e=[e.pop()]:0;break;case"odd":for(var r=0;r<e.length;r+=2)n.push(e[r]);e=n;break;case"even":for(var r=1;r<e.length;r+=2)n.push(e[r]);e=n}}return e.length>0?e:!1},hide:function(){f(function(e){e.style.display="none"})},show:function(){f(function(e){e.style.display="";l(e,"display")==="none"?e.style.display="block":0})},toggle:function(){f(function(e){if(l(e,"display")==="none"){e.style.display="";l(e,"display")==="none"?e.style.display="block":0}else e.style.display="none"})},remove:function(){var t=e.length;f(function(e){e.parentNode.removeChild(e)})},css:function(e,t){var n=[];f(function(r){t?p(r,e,t):r.style[e]?n.push(r.style[e]):l(r,e)?n.push(l(r,e)):n.push(null)});if(n.length>0){n=n.reverse();n.length===1?n=n[0]:0;return n}},cls:function(e,t){var n=[],r,i;if(e){r=e.split(" ");t=t||"replace"}f(function(s){if(e)switch(t){case"add":s.className=s.className+" "+e;break;case"remove":for(var o=0;o<r.length;o++){i=new RegExp(r[o],"g");s.className=s.className.replace(i,"")}break;case"replace":s.className=e}else n.push(s.className)});if(n.length>0)return d(n)},html:function(e,t){var n=[],r,i;f(function(s){if(t){r=document.createElement("div");r.innerHTML=e;while(i=r.lastChild)t==="before"?s.parentNode.insertBefore(i,s):t==="after"&&s.parentNode.insertBefore(i,s.nextSibling)}else e?s.innerHTML=e:n.push(s.innerHTML)});if(n.length>0)return d(n)},attr:function(e,t){var n=[];f(function(r){if(e){e=e.toLowerCase();switch(e){case"style":t?r.style.cssText=t:r.style.cssText?n.push(r.style.cssText):n.push(null);break;case"class":t?r.className=t:r.className?n.push(r.className):n.push(null);break;default:t?r.setAttribute(e,t):r.getAttribute(e)?n.push(r.getAttribute(e)):n.push(null)}}});if(n.length>0)return d(n)},val:function(e){var t=[],n=[];typeof e!="undefined"&&typeof e!="object"&&(e=[e]);f(function(r){if(e)switch(r.nodeName){case"SELECT":for(var i=0;i<r.length;i++)for(var s=0;s<e.length;s++){r[i].selected="";if(r[i].value===e[s]){r[i].selected="selected";break}}break;case"INPUT":switch(r.type){case"checkbox":case"radio":r.checked="";for(var i=0;i<e.length;i++)if(r.value===e[i]){r.checked="checked";break}break;default:r.value=e[0]}break;case"TEXTAREA":case"BUTTON":r.value=e[0]}else switch(r.nodeName){case"SELECT":var o=n.length;n.push([]);for(var i=0;i<r.length;i++)r[i].selected?n[o].push(r[i].value):0;switch(n[o].length){case 0:n[o]=null;break;case 1:n[o]=n[o][0]}break;case"INPUT":switch(r.type){case"checkbox":r.checked?n.push(r.value):n.push(null);break;case"radio":var u=!1;for(var i=0;i<t.length;i++)if(t[i][0]===r.name){r.checked?n[t[i][1]]=r.value:0;u=!0}if(!u){t.push([r.name,n.length]);r.checked?n.push(r.value):n.push(null)}break;default:n.push(r.value)}break;case"TEXTAREA":case"BUTTON":n.push(r.value)}});if(n.length>0)return d(n)},ajax:function(t,n,r,i){var s,n=n||"GET",u=v(e),a="_ts="+ +(new Date);o.XMLHttpRequest?s=new XMLHttpRequest:o.ActiveXObject&&(s=new ActiveXObject("Microsoft.XMLHTTP"));if(s){n=n.toUpperCase();t=i?n==="POST"?t+"?"+a:t+"?"+u+"&"+a:n==="POST"?t:t+"?"+u;s.open(n,t,!0);n==="POST"?s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):0;s.send(u);s.onreadystatechange=function(){if(s.readyState===4&&s.status===200&&r)try{r(s.responseText)}catch(e){}}}}}}var e=[],t=[],n=[],r=!1,i=!1,s=document,o=window;if(s.addEventListener){s.addEventListener("DOMContentLoaded",u,!1);o.addEventListener("load",a,!1)}else if(s.attachEvent){s.attachEvent("onreadystatechange",u);o.attachEvent("onload",a)}else o.onload=a;o.$=m})();