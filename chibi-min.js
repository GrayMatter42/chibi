/* Chibi v0.1, (C)2012 Kyle Barrow, GPLv3 Licensed */(function(){var e=[],t=!1,n=!1,r=[],i=!1,s=document,o=window;if(s.addEventListener){s.addEventListener("DOMContentLoaded",function(){t=!0},!1);o.addEventListener("load",function(){t=!0},!1)}else if(s.attachEvent){s.attachEvent("onreadystatechange",function(){t=!0});o.attachEvent("onload",function(){t=!0})}else o.onload=function(){t=!0};var u=function(){if(t){n&&clearTimeout(n);for(var e=0;e<r.length;e++)r[e]();r=[]}else n=setTimeout(u,0)},a=function(t){for(var n=e.length-1;n>=0;n--)t.call(this,e[n])},f=function(e,t){return e.currentStyle?e.currentStyle[t]:o.getComputedStyle?o.getComputedStyle(e,null).getPropertyValue(t):null},l=function(e,t){return encodeURIComponent(e).replace(/%20/g,"+")+"="+encodeURIComponent(t).replace(/%20/g,"+")},c=function(t){e=[];if(t)if(t.nodeType&&t.nodeType===1)e=[t];else if(typeof t=="object"||typeof t.length=="number"&&typeof t.item=="function")e=t;else if(typeof t=="string"){s.querySelectorAll||(s.querySelectorAll=function(t){e=[];var n,r,i;n=s.createElement("STYLE");n.type="text/css";if(n.styleSheet){n.styleSheet.cssText=t+" {a:b}";if(s.getElementsByTagName("head").length===0){r=s.createElement("head");s.getElementsByTagName("html")[0].appendChild(r)}s.getElementsByTagName("head")[0].appendChild(n);i=s.getElementsByTagName("*");for(var o=0;o<i.length;o++)f(i[o],"a")==="b"?e.push(i[o]):0;s.getElementsByTagName("head")[0].removeChild(n)}return e});e=s.querySelectorAll(t)}},h=function(e,t,n){try{e.style[t]=n;return!0}catch(r){return!1}},p=function(e){e=e.reverse();e.length===1?e=e[0]:0;return e},d=function(e){var t="",n;if(e.constructor===Object)for(n in e)if(e[n].constructor===Array)for(var r=0;r<e[n].length;r++)t+="&"+l(n,e[n][r]);else t+="&"+l(n,e[n]);else{e=e.length>0?e[0]:e;if(e.nodeName==="FORM"){t="";for(var r=0;r<e.elements.length;r++){n=e.elements[r];if(!n.disabled)switch(n.type){case"button":case"image":case"file":case"submit":case"reset":break;case"select-one":n.length>0?t+="&"+l(n.name,n.value):0;break;case"select-multiple":for(var i=0;i<n.length;i++)n[i].selected?t+="&"+l(n.name,n[i].value):0;break;case"checkbox":case"radio":n.checked?t+="&"+l(n.name,n.value):0;break;default:t+="&"+l(n.name,n.value)}}}}t.length>0?t=t.substring(1):0;return t},v=function(t){c(t);return{ready:function(e){if(e){r.push(e);u()}},find:function(t){if(t){var n=[];switch(t){case"first":e.length>0?e=[e[0]]:0;break;case"last":e.length>0?e=[e[e.length-1]]:0;break;case"odd":for(var r=0;r<e.length;r+=2)n.push(e[r]);e=n;break;case"even":for(var r=1;r<e.length;r+=2)n.push(e[r]);e=n}}return e},hide:function(){a(function(e){e.style.display="none"})},show:function(){a(function(e){e.style.display="";f(e,"display")==="none"?e.style.display="block":0})},toggle:function(){a(function(e){if(f(e,"display")==="none"){e.style.display="";f(e,"display")==="none"?e.style.display="block":0}else e.style.display="none"})},remove:function(){var t=e.length;a(function(e){e.parentNode.removeChild(e)})},css:function(e,t){var n=[];a(function(r){t?h(r,e,t):r.style[e]?n.push(r.style[e]):n.push(null)});if(n.length>0){n=n.reverse();n.length===1?n=n[0]:0;return n}},html:function(e,t){var n=[],r,i;a(function(s){if(t){r=document.createElement("div");r.innerHTML=e;while(i=r.lastChild)t==="before"?s.parentNode.insertBefore(i,s):s.parentNode.insertBefore(i,s.nextSibling)}else e?s.innerHTML=e:n.push(s.innerHTML)});if(n.length>0)return p(n)},attr:function(e,t){var n=[];a(function(r){if(e)switch(e){case"style":t?r.style.cssText=t:r.style.cssText?n.push(r.style.cssText):n.push(null);break;case"class":t?r.className=t:r.className?n.push(r.className):n.push(null);break;default:t?r.setAttribute(e,t):r.getAttribute(e)?n.push(r.getAttribute(e)):n.push(null)}});if(n.length>0)return p(n)},val:function(e){var t=[],n=[];typeof e!="undefined"&&typeof e!="object"&&(e=[e]);a(function(r){if(e)switch(r.nodeName){case"SELECT":for(var i=0;i<r.length;i++)for(var s=0;s<e.length;s++){r[i].selected="";if(r[i].value===e[s]){r[i].selected="selected";break}}break;case"INPUT":switch(r.type){case"checkbox":case"radio":r.checked="";for(var i=0;i<e.length;i++)if(r.value===e[i]){r.checked="checked";break}break;default:r.value=e[0]}break;case"TEXTAREA":case"BUTTON":r.value=e[0]}else switch(r.nodeName){case"SELECT":var o=n.length;n.push([]);for(var i=0;i<r.length;i++)r[i].selected?n[o].push(r[i].value):0;switch(n[o].length){case 0:n[o]=null;break;case 1:n[o]=n[o][0]}break;case"INPUT":switch(r.type){case"checkbox":r.checked?n.push(r.value):n.push(null);break;case"radio":var u=!1;for(var i=0;i<t.length;i++)if(t[i][0]===r.name){r.checked?n[t[i][1]]=r.value:0;u=!0}if(!u){t.push([r.name,n.length]);r.checked?n.push(r.value):n.push(null)}break;default:n.push(r.value)}break;case"TEXTAREA":case"BUTTON":n.push(r.value)}});if(n.length>0)return p(n)},ajax:function(t,n,r,i){var s,n=n.toUpperCase(),u=d(e),a="_ts="+ +(new Date);o.XMLHttpRequest?s=new XMLHttpRequest:o.ActiveXObject&&(s=new ActiveXObject("Microsoft.XMLHTTP"));if(s){n=n.toUpperCase();t=i?n==="POST"?t+"?"+a:t+"?"+u+"&"+a:n==="POST"?t:t+"?"+u;s.open(n,t,!0);n==="POST"?s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):0;s.send(u);s.onreadystatechange=function(){if(s.readyState===4&&s.status===200)try{r(s.responseText)}catch(e){}}}}}};o.$=v})();